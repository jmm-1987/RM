{% extends "base.html" %}

{% block title %}Editar Programación{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h2><i class="fas fa-edit"></i> Editar Programación</h2>
        <hr>
    </div>
</div>

<div class="row">
    <div class="col-md-8 mx-auto">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5>Programación #{{ programacion.id }}</h5>
            </div>
            <div class="card-body">
                <form method="POST">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="zona_id" class="form-label">Zona:</label>
                            <select name="zona_id" id="zona_id" class="form-select" required>
                                {% for zona in zonas %}
                                <option value="{{ zona.id }}" {% if zona.id == programacion.zona_id %}selected{% endif %}>
                                    {{ zona.nombre }}
                                </option>
                                {% endfor %}
                            </select>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label for="plantilla_id" class="form-label">Plantilla de Mensaje:</label>
                            <select name="plantilla_id" id="plantilla_id" class="form-select" required>
                                {% for plantilla in plantillas %}
                                <option value="{{ plantilla.id }}" {% if plantilla.id == programacion.plantilla_id %}selected{% endif %}>
                                    {{ plantilla.nombre }}
                                </option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="hora" class="form-label">Hora (24h):</label>
                            <input type="time" class="form-control" id="hora" name="hora" value="{{ programacion.hora }}" required>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Estado:</label>
                            <div class="form-control-plaintext">
                                {% if programacion.activo %}
                                    <span class="badge bg-success">Activa</span>
                                {% else %}
                                    <span class="badge bg-secondary">Inactiva</span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-12 mb-3">
                            <label class="form-label">Días de la semana:</label>
                            <div class="d-flex flex-wrap gap-3">
                                {% set dias_nombres = ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado', 'Domingo'] %}
                                {% for i in range(7) %}
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="dias_semana" id="dia_{{ i }}" value="{{ i }}"
                                           {% if i in dias_seleccionados %}checked{% endif %}>
                                    <label class="form-check-label" for="dia_{{ i }}">{{ dias_nombres[i] }}</label>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-12">
                            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                <a href="{{ url_for('programaciones') }}" class="btn btn-secondary">
                                    <i class="fas fa-times"></i> Cancelar
                                </a>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i> Guardar Cambios
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}


















